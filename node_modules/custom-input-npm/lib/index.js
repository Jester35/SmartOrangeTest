"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.inputWithCross=inputWithCross;require("../styles/index.css");var _helpers=require("./helpers");var defaultCrossStyle={lineStyle:"1px solid #000",height:"12px",positionRight:"6px",positionTop:"25%"};function inputWithCross(_ref){var id=_ref.id,inputStyles=_ref.inputStyles,_ref$crossStyle=_ref.crossStyle,crossStyle=_ref$crossStyle===void 0?defaultCrossStyle:_ref$crossStyle,_ref$placeholder=_ref.placeholder,placeholder=_ref$placeholder===void 0?"":_ref$placeholder,parentId=_ref.parentId,onClick=_ref.onClick,onFocus=_ref.onFocus,onBlur=_ref.onBlur,onChange=_ref.onChange,onEnter=_ref.onEnter,_ref$defaultValue=_ref.defaultValue,defaultValue=_ref$defaultValue===void 0?"":_ref$defaultValue,withDropdown=_ref.withDropdown,dropDownProps=_ref.dropDownProps;if(!parentId){return new Error("You need to set parent id")}var parentElem=document.querySelector("#".concat(parentId));var inputWrapper=document.createElement("div");var crossIcon=document.createElement("span");var input=document.createElement("input");var dropdown=document.createElement("div");inputWrapper.setAttribute("id","custom-input-wrapper");(0,_helpers.customizeCrossIcon)(crossIcon,crossStyle);crossIcon.addEventListener("click",function(){input.value="";crossIcon.classList.remove("close");(0,_helpers.setDropdownOptions)(dropDownProps,input,crossIcon,dropdown)});input.addEventListener("input",function(e){if(!e.target.value){crossIcon.classList.remove("close");(0,_helpers.setDropdownOptions)(dropDownProps,input,crossIcon,dropdown)}else{crossIcon.classList.add("close");if(dropDownProps.options&&dropDownProps.options.length){(0,_helpers.setDropdownOptions)(dropDownProps,input,crossIcon,dropdown,e.target.value)}}});input.addEventListener("focus",function(){if(dropDownProps.options&&dropDownProps.options.length){dropdown.style.display="block"}});(0,_helpers.customiseInput)(input,id,placeholder,defaultValue,onClick,onFocus,onBlur,onChange,onEnter,inputStyles);inputWrapper.appendChild(input);inputWrapper.appendChild(crossIcon);if(withDropdown){(0,_helpers.customizeDropdown)(dropdown,inputStyles,dropDownProps);(0,_helpers.setDropdownOptions)(dropDownProps,input,crossIcon,dropdown);inputWrapper.appendChild(dropdown)}if(!parentElem){return new Error("There is no node with parentId:".concat(parentId," in DOM"))}window.document.addEventListener("click",function(e){if(e.target!==document.querySelector("#custom-input")){dropdown.style.display="none"}});parentElem.appendChild(inputWrapper)}